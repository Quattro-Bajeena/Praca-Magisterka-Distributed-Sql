services:
  oceanbase:
    image: oceanbase/oceanbase-ce:latest
    container_name: oceanbase-ce
    ports:
      - "2881:2881"
    environment:
      MODE: mini
      OB_CLUSTER_NAME: obcluster
      OB_TENANT_NAME: test
      OB_SYS_PASSWORD: root_password
      OB_TENANT_PASSWORD: tenant_password
    healthcheck:
      test: ["CMD", "mysql", "-h127.0.0.1", "-P2881", "-uroot", "-proot_password", "-e", "SELECT 1"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - oceanbase-network

networks:
  oceanbase-network:
    driver: bridge